
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Frequently Asked Questions &#8212; pyemaps 1.0.4 Stable documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Licence" href="license.html" />
    <link rel="prev" title="Visualisation" href="visualization.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="license.html" title="Licence"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="visualization.html" title="Visualisation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyemaps 1.0.4 Stable documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Frequently Asked Questions</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="frequently-asked-questions">
<h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this heading">¶</a></h1>
<section id="what-s-likely-the-cause-of-installation-failure">
<h2>What’s Likely the Cause of Installation Failure?<a class="headerlink" href="#what-s-likely-the-cause-of-installation-failure" title="Permalink to this heading">¶</a></h2>
<p><strong>pyemaps</strong> installation includes version requirements on pip,
its setuptools and wheel that make downloading and installing the package correct and fast.
These tools and their right versions may not come with your <em>python</em> installation and environment.
Without them, pip tries to re-build <strong>pyemaps</strong> from source and will fail due to the fact
that <strong>pyemaps</strong> contains extensions modules.</p>
<p>Make sure you have updated versions of pip, setuptools, and wheel:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install -U pip setuptools wheel</span>
</pre></div>
</div>
<p>before trying <a class="reference internal" href="usage.html#installation"><span class="std std-ref">installation</span></a> again.</p>
</section>
<section id="how-do-i-install-and-run-pyemaps-in-anaconda-environment-with-jupyter-notebook">
<h2>How Do I Install and Run <strong>pyemaps</strong> in Anaconda Environment With Jupyter Notebook?<a class="headerlink" href="#how-do-i-install-and-run-pyemaps-in-anaconda-environment-with-jupyter-notebook" title="Permalink to this heading">¶</a></h2>
<p>Installing pyemaps in an virtual environment provides isolation and prevents conflicts.
Anaconda and python’s own virtual environment are good choices.</p>
<p>Follow the steps below to install and run pyemaps in Anaconda with Jupyter Notebooks:</p>
<ul>
<li><p>Install Anaconda.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You may need to make a clean install by doing a “Full Uninstall” of existing Anaconda by
deleting old environment and packages folders as old packages can cause dependencies issues.</p>
</div>
</li>
<li><p>Create a new environment in Anaconsa called ‘pyemaps’ in Anaconda command prompt:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">conda create -n pyemaps python=3.7</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Python 3.7 is the only supported python version for now, more version support in development.</p>
</div>
</li>
<li><p>Switch to the new <em>pyemaps</em> environment by activating it:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">conda activate pyemaps</span>
</pre></div>
</div>
</li>
<li><p>Install latest pyemaps in the new environment:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install pyemaps (or pyemaps==X.X.X)</span>
</pre></div>
</div>
</li>
<li><p>Install Jupyter:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install jupyter</span>
</pre></div>
</div>
</li>
<li><p>Run</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">conda install ipywidgets</span>
<span class="go">conda install widgetsnbextension</span>
<span class="go">python -m ipykernel install --user --name pyemaps --display-name &quot;pyemaps (python 3.7)&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>replace –display-name value with your own string if desired.</p>
</div>
</li>
<li><p>Run Jupyter local server:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">jupyter notebook</span>
</pre></div>
</div>
<p>Create a new notebook file to run pyemaps tasks.</p>
</li>
</ul>
</section>
<section id="what-can-i-do-to-speed-up-dynamic-diffraction-simulations">
<h2>What can I do to speed up dynamic diffraction simulations?<a class="headerlink" href="#what-can-i-do-to-speed-up-dynamic-diffraction-simulations" title="Permalink to this heading">¶</a></h2>
<p><strong>pyemaps</strong> Bloch simulation, e. g. dynamic diffraction simulation costs
significant computation resource and operations. As a result, it is much
slower than that of kinematic simulation.</p>
<p>While pyemaps performance has improved significantly since its inception,
there are still rooms for enhancements and we are still looking for
opportunities to make constant progress.</p>
<p>Meanwhile, you can also add to this effort in your simulation with
<strong>pyemaps</strong> by taking advantages of python features such as parallell
processing.</p>
<p>For example:</p>
<ul class="simple">
<li><p>Using python mutiprocessing if your simulation involves multiple controls input.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">ProcessPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="n">MAX_PROCWORKERS</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

      <span class="k">for</span> <span class="n">ec</span> <span class="ow">in</span> <span class="n">emclist</span><span class="p">:</span>
          <span class="n">fs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">cr</span><span class="o">.</span><span class="n">generateBloch</span><span class="p">,</span>
                             <span class="n">disk_size</span><span class="o">=</span><span class="n">dsize</span><span class="p">,</span>
                             <span class="n">sampling</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
                             <span class="n">sample_thickness</span><span class="o">=</span><span class="p">(</span><span class="mi">1750</span><span class="p">,</span><span class="mi">1750</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span>
                             <span class="n">em_controls</span> <span class="o">=</span> <span class="n">ec</span><span class="p">))</span>
</pre></div>
</div>
<p>The above code snippet can be found in <em>samples</em> folder in <em>si_bloch.py</em>.</p>
<ul class="simple">
<li><p>Assisting simulation computation by setting %TMPDIR% environment to a file location
where file I/O performance is much higher than that of the normal folder.</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Visualisation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-s-likely-the-cause-of-installation-failure">What’s Likely the Cause of Installation Failure?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-install-and-run-pyemaps-in-anaconda-environment-with-jupyter-notebook">How Do I Install and Run <strong>pyemaps</strong> in Anaconda Environment With Jupyter Notebook?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-can-i-do-to-speed-up-dynamic-diffraction-simulations">What can I do to speed up dynamic diffraction simulations?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Licence</a></li>
<li class="toctree-l1"><a class="reference internal" href="rn.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules, Classes and Interfaces</a></li>
</ul>

  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="visualization.html"
                          title="previous chapter">Visualisation</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="license.html"
                          title="next chapter">Licence</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="license.html" title="Licence"
             >next</a> |</li>
        <li class="right" >
          <a href="visualization.html" title="Visualisation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyemaps 1.0.4 Stable documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Frequently Asked Questions</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022-2023, EMLab Solutions, Inc..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>